(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},82568,e=>{"use strict";var t,s,a,r,n,i,o,l;let c,u,d,h,p,g;(r=t||(t={})).Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE";class y extends Error{constructor(e,t,s){super(e),this.message=e,this.code=t,this.data=s}}let _=(c=(i=n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g).CapacitorCustomPlatform||null,d=(u=i.Capacitor||{}).Plugins=u.Plugins||{},h=()=>{var e,t;return null!==c?c.name:(null==i?void 0:i.androidBridge)?"android":(null==(t=null==(e=null==i?void 0:i.webkit)?void 0:e.messageHandlers)?void 0:t.bridge)?"ios":"web"},p=e=>{var t;return null==(t=u.PluginHeaders)?void 0:t.find(t=>t.name===e)},g=new Map,u.convertFileSrc||(u.convertFileSrc=e=>e),u.getPlatform=h,u.handleError=e=>i.console.error(e),u.isNativePlatform=()=>"web"!==h(),u.isPluginAvailable=e=>{let t=g.get(e);return!!((null==t?void 0:t.platforms.has(h()))||p(e))},u.registerPlugin=(e,s={})=>{let a,r=g.get(e);if(r)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),r.proxy;let n=h(),i=p(e),o=async()=>(!a&&n in s?a=a="function"==typeof s[n]?await s[n]():s[n]:null!==c&&!a&&"web"in s&&(a=a="function"==typeof s.web?await s.web():s.web),a),l=s=>{let a,r=(...r)=>{let l=o().then(o=>{let l=((s,a)=>{var r,o;if(i){let t=null==i?void 0:i.methods.find(e=>a===e.name);if(t)if("promise"===t.rtype)return t=>u.nativePromise(e,a.toString(),t);else return(t,s)=>u.nativeCallback(e,a.toString(),t,s);if(s)return null==(r=s[a])?void 0:r.bind(s)}else if(s)return null==(o=s[a])?void 0:o.bind(s);else throw new y(`"${e}" plugin is not implemented on ${n}`,t.Unimplemented)})(o,s);if(l){let e=l(...r);return a=null==e?void 0:e.remove,e}throw new y(`"${e}.${s}()" is not implemented on ${n}`,t.Unimplemented)});return"addListener"===s&&(l.remove=async()=>a()),l};return r.toString=()=>`${s.toString()}() { [capacitor code] }`,Object.defineProperty(r,"name",{value:s,writable:!1,configurable:!1}),r},_=l("addListener"),w=l("removeListener"),m=(e,t)=>{let s=_({eventName:e},t),a=async()=>{w({eventName:e,callbackId:await s},t)},r=new Promise(e=>s.then(()=>e({remove:a})));return r.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()},r},f=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return i?m:_;case"removeListener":return w;default:return l(t)}}});return d[e]=f,g.set(e,{name:e,proxy:f,platforms:new Set([...Object.keys(s),...i?[n]:[]])}),f},u.Exception=y,u.DEBUG=!!u.DEBUG,u.isLoggingEnabled=!!u.isLoggingEnabled,n.Capacitor=u),w=_.registerPlugin;class m{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);let a=this.windowListeners[e];return a&&!a.registered&&this.addWindowListener(a),s&&this.sendRetainedArgumentsForEvent(e),Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){for(let e in this.listeners={},this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,s){let a=this.listeners[e];if(!a){if(s){let s=this.retainedEventArguments[e];s||(s=[]),s.push(t),this.retainedEventArguments[e]=s}return}a.forEach(e=>e(t))}hasListeners(e){var t;return!!(null==(t=this.listeners[e])?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new _.Exception(e,t.Unimplemented)}unavailable(e="not available"){return new _.Exception(e,t.Unavailable)}async removeListener(e,t){let s=this.listeners[e];if(!s)return;let a=s.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){let t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}let f=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class v extends m{async getCookies(){let e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[s,a]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent).trim(),a=a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent).trim(),t[s]=a}),t}async setCookie(e){try{let t=f(e.key),s=f(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),n=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${s||""}${a}; path=${r}; ${n};`}catch(e){return Promise.reject(e)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(e){return Promise.reject(e)}}async clearCookies(){try{for(let e of document.cookie.split(";")||[])document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}w("CapacitorCookies",{web:()=>new v});let b=async e=>new Promise((t,s)=>{let a=new FileReader;a.onload=()=>{let e=a.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},a.onerror=e=>s(e),a.readAsDataURL(e)});class k extends m{async request(e){let t,s,a=((e,t={})=>{let s=Object.assign({method:e.method||"GET",headers:e.headers},t),a=((e={})=>{let t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((s,a,r)=>(s[a]=e[t[r]],s),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)s.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){let t=new URLSearchParams;for(let[s,a]of Object.entries(e.data||{}))t.set(s,a);s.body=t.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){let t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,s)=>{t.append(s,e)});else for(let s of Object.keys(e.data))t.append(s,e.data[s]);s.body=t;let a=new Headers(s.headers);a.delete("content-type"),s.headers=a}else(a.includes("application/json")||"object"==typeof e.data)&&(s.body=JSON.stringify(e.data));return s})(e,e.webFetchExtra),r=((e,t=!0)=>e?Object.entries(e).reduce((e,s)=>{let a,r,[n,i]=s;return Array.isArray(i)?(r="",i.forEach(e=>{a=t?encodeURIComponent(e):e,r+=`${n}=${a}&`}),r.slice(0,-1)):(a=t?encodeURIComponent(i):i,r=`${n}=${a}`),`${e}&${r}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),n=r?`${e.url}?${r}`:e.url,i=await fetch(n,a),o=i.headers.get("content-type")||"",{responseType:l="text"}=i.ok?e:{};switch(o.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":s=await i.blob(),t=await b(s);break;case"json":t=await i.json();break;default:t=await i.text()}let c={};return i.headers.forEach((e,t)=>{c[t]=e}),{data:t,headers:c,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}let A=w("CapacitorHttp",{web:()=>new k});(o=s||(s={})).Dark="DARK",o.Light="LIGHT",o.Default="DEFAULT",(l=a||(a={})).StatusBar="StatusBar",l.NavigationBar="NavigationBar";class S extends m{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}w("SystemBars",{web:()=>new S}),e.s(["Capacitor",()=>_,"CapacitorHttp",()=>A,"WebPlugin",()=>m,"registerPlugin",()=>w])},4710,34983,e=>{"use strict";var t=e.i(82568);let s=(0,t.registerPlugin)("Preferences",{web:()=>e.A(41283).then(e=>new e.PreferencesWeb)}),a="wellness_data",r=new class{data={};initialized=!1;async initialize(){if(!this.initialized)try{let{value:e}=await s.get({key:a});e&&(this.data=JSON.parse(e)),this.initialized=!0,console.log("Database initialized successfully")}catch(e){console.error("Failed to initialize database:",e),this.data={},this.initialized=!0}}async save(){await s.set({key:a,value:JSON.stringify(this.data)})}async saveWellness(e){this.initialized||await this.initialize();let t=this.data[e.date]||{date:e.date};this.data[e.date]={date:e.date,wellness:e.wellness||t.wellness||null,sleep:e.sleep||t.sleep||null,hrv:e.hrv||t.hrv||null,stress:e.stress||t.stress||null,activity:e.activity||t.activity||null},await this.save()}async getWellness(e){return this.initialized||await this.initialize(),this.data[e]||null}async getLatestDate(){return this.initialized||await this.initialize(),Object.keys(this.data).sort().reverse()[0]||null}async getHistory(e){return this.initialized||await this.initialize(),Object.keys(this.data).sort().reverse().slice(0,e).map(e=>this.data[e])}async getStats(){this.initialized||await this.initialize();let e=Object.keys(this.data).sort();return{total_days:e.length,earliest_date:e[0]||null,latest_date:e[e.length-1]||null}}async clear(){this.data={},await s.remove({key:a})}};e.s(["db",0,r],34983);let n=t.Capacitor.isNativePlatform();async function i(e,s){if(n){let a=await t.CapacitorHttp.get({url:e,headers:s||{}});return{data:a.data,status:a.status}}{let t=await fetch(e,{headers:s,credentials:"include"});return{data:await t.json().catch(()=>t.text()),status:t.status}}}async function o(e,s,a){if(n){let r=await t.CapacitorHttp.post({url:e,headers:a||{},data:s});return{data:r.data,status:r.status,headers:r.headers}}{let t=await fetch(e,{method:"POST",headers:a,body:"string"==typeof s?s:JSON.stringify(s),credentials:"include"}),r=await t.json().catch(()=>t.text()),n={};return t.headers.forEach((e,t)=>n[t]=e),{data:r,status:t.status,headers:n}}}async function l(e,s){if(n){let a=await t.CapacitorHttp.get({url:e,headers:s||{},responseType:"text"});return{data:a.data,status:a.status}}{let t=await fetch(e,{headers:s,credentials:"include"});return{data:await t.text(),status:t.status}}}let c="https://connectapi.garmin.com/oauth-service/oauth",u="garmin_tokens",d=new class{oauth1Token=null;oauth2Token=null;isRefreshing=!1;refreshQueue=[];constructor(){this.loadTokens()}async loadTokens(){try{let{value:e}=await s.get({key:u});if(e){let t=JSON.parse(e);this.oauth1Token=t.oauth1,this.oauth2Token=t.oauth2}}catch(e){console.error("Failed to load tokens:",e)}}async saveTokens(){try{let e={oauth1:this.oauth1Token,oauth2:this.oauth2Token};await s.set({key:u,value:JSON.stringify(e)})}catch(e){console.error("Failed to save tokens:",e)}}async logout(){this.oauth1Token=null,this.oauth2Token=null,await s.remove({key:u})}async isAuthenticated(){return await this.loadTokens(),null!==this.oauth2Token}async login(e,t){try{return await s.set({key:"garmin_email",value:e}),await s.set({key:"garmin_password",value:t}),this.oauth2Token={access_token:"pending_sync",token_type:"Bearer",expires_in:3600,expires_at:Date.now()+36e5},await this.saveTokens(),{success:!0}}catch(e){return console.error("Login error:",e),{success:!1,error:e instanceof Error?e.message:"Failed to save credentials"}}}async syncViaBackend(e=7,t){try{let{value:a}=await s.get({key:"garmin_email"}),{value:n}=await s.get({key:"garmin_password"});if(!a||!n)return{success:!1,daysProcessed:0,error:"Not authenticated"};let l="http://localhost:8000";console.log("Syncing via backend API..."),t?.(0,e);let c=await o(`${l}/api/v1/garmin/sync-wellness`,JSON.stringify({email:a,password:n,days:e}),{"Content-Type":"application/json",Accept:"application/json"});if(200!==c.status){let s=c.data,a=s?.detail||`Backend sync failed (${c.status})`;if(0===c.status||a.includes("fetch"))return console.log("Backend not available, attempting direct sync..."),this.sync(e,t);return{success:!1,daysProcessed:0,error:a}}let u=c.data;console.log("Sync complete, fetching wellness data..."),t?.(Math.floor(.8*e),e);let d=await i(`${l}/api/v1/garmin/wellness-history?days=${e}`,{Accept:"application/json"});if(200===d.status){let e=d.data;if(e.success&&e.days){for(let t of(console.log(`Saving ${e.days.length} days to local storage...`),await r.initialize(),e.days)){let e=t.sleep_hours?3600*t.sleep_hours:0,s=t.deep_sleep_pct||0,a=t.rem_sleep_pct||0;await r.saveWellness({date:t.date,wellness:{date:t.date,fetched_at:new Date().toISOString(),resting_heart_rate:t.resting_heart_rate,training_readiness_score:null},sleep:e>0?{date:t.date,sleep_start:null,sleep_end:null,total_sleep_seconds:e,deep_sleep_seconds:Math.round(e*s/100),light_sleep_seconds:Math.round(e*(100-s-a)/100),rem_sleep_seconds:Math.round(e*a/100),awake_seconds:0,sleep_score:t.sleep_score,sleep_efficiency:null,avg_spo2:null,avg_respiration:null}:null,hrv:t.hrv?{date:t.date,hrv_weekly_avg:null,hrv_last_night_avg:t.hrv,hrv_last_night_5min_high:null,hrv_status:t.hrv_status,baseline_low:null,baseline_balanced_low:null,baseline_balanced_upper:null}:null,stress:t.body_battery_charged?{date:t.date,avg_stress_level:t.avg_stress,max_stress_level:null,rest_stress_duration:0,low_stress_duration:0,medium_stress_duration:0,high_stress_duration:0,body_battery_charged:t.body_battery_charged,body_battery_drained:t.body_battery_drained,body_battery_high:t.body_battery_high,body_battery_low:t.body_battery_low}:null,activity:t.steps?{date:t.date,steps:t.steps,steps_goal:t.steps_goal||1e4,total_distance_m:0,active_calories:t.active_calories,total_calories:null,intensity_minutes:t.intensity_minutes||0,floors_climbed:0}:null})}console.log("Local storage updated successfully")}}return t?.(e,e),{success:u.success,daysProcessed:u.synced_count,error:u.success?void 0:u.message}}catch(s){return console.error("Backend sync error:",s),console.log("Falling back to direct sync..."),this.sync(e,t)}}async exchangeTicketForOAuth1(e){try{Math.floor(Date.now()/1e3).toString(),Math.random().toString(36).substring(2,15),Math.random().toString(36).substring(2,15);let t=`${c}/preauthorized`,s=new URLSearchParams({ticket:e,"login-url":"https://sso.garmin.com/sso/embed","accepts-mfa-tokens":"true"});encodeURIComponent("E08WAR897WEy2knn7aFBrvegVAf0AFdWBBF");let a=`${t}?${s.toString()}`;console.log("OAuth1 exchange URL:",a);let r=await l(a,{"User-Agent":"com.garmin.android.apps.connectmobile",Accept:"*/*"});if(console.log("OAuth1 response status:",r.status),console.log("OAuth1 response data:",r.data?.substring(0,200)),200!==r.status)return console.error("OAuth1 failed with status:",r.status),{success:!1,error:`OAuth1 failed (${r.status})`};let n=r.data,i=new URLSearchParams(n),o=i.get("oauth_token"),u=i.get("oauth_token_secret");if(console.log("OAuth1 tokens received:",!!o,!!u),!o||!u){try{let e=JSON.parse(n);if(e.oauth_token&&e.oauth_token_secret)return this.oauth1Token={oauth_token:e.oauth_token,oauth_token_secret:e.oauth_token_secret},{success:!0}}catch{}return console.error("OAuth1 response format unexpected:",n.substring(0,200)),{success:!1,error:"Invalid OAuth1 response format"}}return this.oauth1Token={oauth_token:o,oauth_token_secret:u},{success:!0}}catch(e){return console.error("OAuth1 exchange error:",e),{success:!1,error:"OAuth1 exchange failed: "+(e instanceof Error?e.message:"unknown")}}}async exchangeOAuth1ForOAuth2(){if(!this.oauth1Token)return{success:!1,error:"No OAuth1 token available"};try{let e=Math.floor(Date.now()/1e3).toString(),t=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),s=`OAuth oauth_consumer_key="fc3e99d2-118c-44b8-8ae3-03370dde24c0", oauth_token="${this.oauth1Token.oauth_token}", oauth_signature_method="HMAC-SHA1", oauth_timestamp="${e}", oauth_nonce="${t}", oauth_version="1.0", oauth_signature="placeholder"`;console.log("OAuth2 exchange starting...");let a=await o(`${c}/exchange/user/2.0`,"",{"User-Agent":"com.garmin.android.apps.connectmobile",Authorization:s,"Content-Type":"application/x-www-form-urlencoded"});if(console.log("OAuth2 response status:",a.status),200!==a.status)return console.error("OAuth2 failed:",a.status,a.data),{success:!1,error:`OAuth2 failed (${a.status})`};let r=a.data;if(!r.access_token)return console.error("No access token in response:",r),{success:!1,error:"No access token received"};return this.oauth2Token={access_token:r.access_token,token_type:r.token_type||"Bearer",expires_in:r.expires_in||3600,refresh_token:r.refresh_token,expires_at:Date.now()+1e3*(r.expires_in||3600)},console.log("OAuth2 token received successfully"),{success:!0}}catch(e){return console.error("OAuth2 exchange error:",e),{success:!1,error:"OAuth2 exchange failed: "+(e instanceof Error?e.message:"unknown")}}}async apiRequest(e){if(!this.oauth2Token)throw Error("Not authenticated");this.oauth2Token.expires_at&&Date.now()>=this.oauth2Token.expires_at&&await this.refreshToken();try{let t=await i(`https://connect.garmin.com${e}`,{Authorization:`Bearer ${this.oauth2Token.access_token}`,"User-Agent":"com.garmin.android.apps.connectmobile",Accept:"application/json"});if(401===t.status)return await this.refreshToken(),this.apiRequest(e);if(200!==t.status)return console.error(`API request failed: ${t.status}`),null;return t.data}catch(e){return console.error("API request error:",e),null}}async refreshToken(){if(this.isRefreshing)return new Promise(e=>{this.refreshQueue.push(e)});this.isRefreshing=!0;try{(await this.exchangeOAuth1ForOAuth2()).success&&await this.saveTokens()}finally{this.isRefreshing=!1,this.refreshQueue.forEach(e=>e()),this.refreshQueue=[]}}async fetchSleep(e){let t=await this.apiRequest(`/wellness-service/wellness/dailySleep?date=${e}`);if(!t)return null;let s=t.deepSleepSeconds||0,a=t.lightSleepSeconds||0,r=t.remSleepSeconds||0,n=t.awakeSleepSeconds||0,i=s+a+r,o=i+n;return{date:e,sleep_start:t.sleepStartTimestampLocal||null,sleep_end:t.sleepEndTimestampLocal||null,total_sleep_seconds:i,deep_sleep_seconds:s,light_sleep_seconds:a,rem_sleep_seconds:r,awake_seconds:n,sleep_score:t.sleepScores?.overall?.value||null,sleep_efficiency:Math.round(10*(o>0?i/o*100:0))/10,avg_spo2:t.avgOxygenSaturation||null,avg_respiration:t.avgSleepRespirationValue||null}}async fetchHRV(e){let t=await this.apiRequest(`/hrv-service/hrv/${e}`);if(!t)return null;let s=t.hrvSummary||{},a=s.baseline||{};return{date:e,hrv_weekly_avg:s.weeklyAvg||null,hrv_last_night_avg:s.lastNightAvg||null,hrv_last_night_5min_high:s.lastNight5MinHigh||null,hrv_status:s.status||null,baseline_low:a.lowUpper||null,baseline_balanced_low:a.balancedLow||null,baseline_balanced_upper:a.balancedUpper||null}}async fetchStress(e){let t=await this.apiRequest(`/wellness-service/wellness/dailyStress/${e}`),s=await this.apiRequest(`/wellness-service/wellness/bodyBattery/reports/daily?startDate=${e}&endDate=${e}`),a=s&&s.length>0?s[0]:null;return t||a?{date:e,avg_stress_level:t?.overallStressLevel||null,max_stress_level:t?.maxStressLevel||null,rest_stress_duration:t?.restStressDuration||0,low_stress_duration:t?.lowStressDuration||0,medium_stress_duration:t?.mediumStressDuration||0,high_stress_duration:t?.highStressDuration||0,body_battery_charged:a?.charged||null,body_battery_drained:a?.drained||null,body_battery_high:a?.highBB||null,body_battery_low:a?.lowBB||null}:null}async fetchActivity(e){let t=await this.apiRequest(`/usersummary-service/stats/steps/daily/${e}/${e}`),s=t&&t.length>0?t[0]:null,a=await this.apiRequest(`/usersummary-service/usersummary/daily/${e}`),r=s?.totalSteps||0,n=s?.stepGoal||1e4,i=s?.totalDistance||0;a&&(0===r&&(r=a.totalSteps||0),1e4===n&&(n=a.dailyStepGoal||1e4),0===i&&(i=a.totalDistanceMeters||0));let o=a?.activeKilocalories||null,l=a?.totalKilocalories||null,c=a?.floorsAscended||0,u=a?.moderateIntensityMinutes||0,d=a?.vigorousIntensityMinutes||0;return 0===r&&null===o?null:{date:e,steps:r,steps_goal:n,total_distance_m:i,active_calories:o,total_calories:l,intensity_minutes:u+d,floors_climbed:c}}async fetchRestingHeartRate(e){let t=await this.apiRequest(`/wellness-service/wellness/dailyHeartRate?date=${e}`);if(!t)return null;let s=t.restingHeartRate;return s&&s>0?s:null}async fetchWellness(e){console.log(`Fetching wellness data for ${e}...`);let[t,s,a,r,n]=await Promise.all([this.fetchSleep(e),this.fetchHRV(e),this.fetchStress(e),this.fetchActivity(e),this.fetchRestingHeartRate(e)]);return{date:e,wellness:{date:e,fetched_at:new Date().toISOString(),resting_heart_rate:n,training_readiness_score:null},sleep:t,hrv:s,stress:a,activity:r}}async sync(e=1,t){try{if(!await this.isAuthenticated())return{success:!1,daysProcessed:0,error:"Not authenticated"};await r.initialize();let s=new Date,a=0;for(let n=0;n<e;n++){let i=new Date(s);i.setDate(i.getDate()-n);let o=i.toISOString().split("T")[0];try{let s=await this.fetchWellness(o);await r.saveWellness(s),a++,t&&t(a,e)}catch(e){console.error(`Failed to fetch ${o}:`,e)}}return{success:!0,daysProcessed:a}}catch(e){return console.error("Sync error:",e),{success:!1,daysProcessed:0,error:e instanceof Error?e.message:"Sync failed"}}}};e.s(["garmin",0,d],4710)},41283,e=>{e.v(t=>Promise.all(["static/chunks/ecb455d830c14f9c.js"].map(t=>e.l(t))).then(()=>t(82966)))}]);