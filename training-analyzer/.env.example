# =============================================================================
# Training Analyzer Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values for your environment.
# See docs/workout-analysis-database/DATABASE_SCALING_PLAN.md for details.
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------

# Local SQLite database path (development)
# Default: training-analyzer/training.db
TRAINING_DB_PATH=./training.db

# Database backend: sqlite or supabase
# Set to "supabase" when ready to migrate to production
DATABASE_BACKEND=sqlite

# -----------------------------------------------------------------------------
# Supabase Configuration (Production)
# -----------------------------------------------------------------------------
# Required for Supabase/PostgreSQL backend
# Get these from your Supabase project settings: Settings > API

# Supabase project URL
# Example: https://abcdefghijk.supabase.co
SUPABASE_URL=

# Supabase anonymous (public) key
# Used for client-side requests with Row-Level Security (RLS)
SUPABASE_ANON_KEY=

# Supabase service role key
# WARNING: This key bypasses RLS - only use server-side!
# Required for backend services and migrations
SUPABASE_SERVICE_KEY=

# -----------------------------------------------------------------------------
# Garmin Connect Integration
# -----------------------------------------------------------------------------
# Required for Garmin data sync

# Garmin Connect credentials (for development/testing only)
# In production, users provide these via the UI and they're encrypted in DB
GARMIN_EMAIL=
GARMIN_PASSWORD=

# Encryption key for storing Garmin credentials in database
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
CREDENTIAL_ENCRYPTION_KEY=

# Garmin sync scheduler settings
GARMIN_SYNC_ENABLED=true
GARMIN_SYNC_HOUR=6
GARMIN_SYNC_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# Strava Integration
# -----------------------------------------------------------------------------
# Required for Strava OAuth integration

STRAVA_CLIENT_ID=
STRAVA_CLIENT_SECRET=
STRAVA_REDIRECT_URI=http://localhost:3000/api/strava/callback

# -----------------------------------------------------------------------------
# OpenAI / LLM Configuration
# -----------------------------------------------------------------------------
# Required for AI-powered workout analysis and coaching

OPENAI_API_KEY=

# ===== Langfuse Observability =====
# Langfuse for AI agent tracing and monitoring
# Sign up at https://cloud.langfuse.com or self-host
LANGFUSE_PUBLIC_KEY=pk-lf-xxxxx
LANGFUSE_SECRET_KEY=sk-lf-xxxxx
LANGFUSE_HOST=https://cloud.langfuse.com

# ===== Anthropic (Claude) =====
# For LangChain agent (alternative to OpenAI)
ANTHROPIC_API_KEY=sk-ant-xxxxx

# Model configuration
# Options: gpt-4o-mini, gpt-4o, gpt-4-turbo
OPENAI_MODEL_FAST=gpt-4o-mini
OPENAI_MODEL_SMART=gpt-4o

# -----------------------------------------------------------------------------
# Stripe Payments (Production)
# -----------------------------------------------------------------------------
# Required for subscription billing

STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PRICE_ID_PRO_MONTHLY=
STRIPE_PRICE_ID_PRO_YEARLY=

# -----------------------------------------------------------------------------
# Authentication (Production)
# -----------------------------------------------------------------------------
# JWT configuration for API authentication

# Secret key for JWT token signing
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=

# JWT token expiration (in hours)
JWT_EXPIRATION_HOURS=24

# Google OAuth (via Supabase Auth)
# Configure in Supabase Dashboard: Authentication > Providers > Google
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------

# Environment: development, staging, production
ENVIRONMENT=development

# API base URL
API_BASE_URL=http://localhost:8000

# Frontend URL (for CORS and redirects)
FRONTEND_URL=http://localhost:3000

# CORS Configuration
# Allowed HTTP methods (comma-separated)
CORS_METHODS=["GET","POST","PUT","DELETE","OPTIONS"]
# Allowed headers (comma-separated)
CORS_HEADERS=["Authorization","Content-Type","Accept"]

# Logging level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Protect against abuse

# API rate limits (requests per minute)
RATE_LIMIT_DEFAULT=60
RATE_LIMIT_AI_ENDPOINTS=10

# AI usage limits (per user, per billing period)
AI_DAILY_REQUEST_LIMIT=100
AI_DAILY_TOKEN_LIMIT=500000
AI_DAILY_COST_LIMIT_CENTS=500
AI_MONTHLY_COST_LIMIT_CENTS=5000
